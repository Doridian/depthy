
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2. API documentation &#8212; depthy 0.4.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="1. depthy" href="readme.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="readme.html" title="1. depthy"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">depthy 0.4.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>API documentation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="api-documentation">
<h1><span class="section-number">2. </span>API documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="depthy-stereo">
<h2><span class="section-number">2.1. </span>depthy.stereo<a class="headerlink" href="#depthy-stereo" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="depthy.stereo.sad_block_matching">
<span class="sig-prename descclassname"><span class="pre">depthy.stereo.</span></span><span class="sig-name descname"><span class="pre">sad_block_matching</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_l:</span> <span class="pre">Optional[numpy.ndarray]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_r:</span> <span class="pre">Optional[numpy.ndarray]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disp_max:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disp_min:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ws:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prec:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs)</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'numpy.ndarray'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;class</span> <span class="pre">'numpy.ndarray'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#depthy.stereo.sad_block_matching" title="Permalink to this definition">¶</a></dt>
<dd><p>SAD (Sum of Absolute Differences) block matching variant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img_l</strong> – left image</p></li>
<li><p><strong>img_r</strong> – right image</p></li>
<li><p><strong>disp_max</strong> – maximum disparity</p></li>
<li><p><strong>disp_min</strong> – minimum disparity</p></li>
<li><p><strong>ws</strong> – window size of blocks</p></li>
<li><p><strong>prec</strong> – precision for disparity (sub-pixel refinement if prec &gt; 1)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple of two numpy arrays for left and right disparity maps</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="depthy.stereo.semi_global_matching">
<span class="sig-prename descclassname"><span class="pre">depthy.stereo.</span></span><span class="sig-name descname"><span class="pre">semi_global_matching</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_l:</span> <span class="pre">Optional[numpy.ndarray]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_r:</span> <span class="pre">Optional[numpy.ndarray]</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disp_max:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">64</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disp_min:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p1:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p2:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">120</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feat_method:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'census'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dsim_method:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'xor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size_k:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blur_opt:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">medi_opt:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs)</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'numpy.ndarray'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;class</span> <span class="pre">'numpy.ndarray'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#depthy.stereo.semi_global_matching" title="Permalink to this definition">¶</a></dt>
<dd><p>Semi-global matching variant covering feature extraction, dissimilarity measure and cost aggregation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img_l</strong> – left image</p></li>
<li><p><strong>img_r</strong> – right image</p></li>
<li><p><strong>disp_max</strong> – maximum disparity</p></li>
<li><p><strong>disp_min</strong> – minimum disparity</p></li>
<li><p><strong>p1</strong> – minor penalty for cost aggregation</p></li>
<li><p><strong>p2</strong> – major penalty for cost aggregation</p></li>
<li><p><strong>feat_method</strong> – feature extraction method (only supports ‘census’ or None)</p></li>
<li><p><strong>dsim_method</strong> – dissimilarity measure (only supports ‘xor’ or ‘abs_diff’)</p></li>
<li><p><strong>size_k</strong> – kernel width for filter operations</p></li>
<li><p><strong>blur_opt</strong> – flag for Gaussian blur usage</p></li>
<li><p><strong>medi_opt</strong> – flag for Median filter usage</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple of two numpy arrays for left and right disparity maps</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="depthy-lightfield">
<h2><span class="section-number">2.2. </span>depthy.lightfield<a class="headerlink" href="#depthy-lightfield" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="depthy.lightfield.epi_depth">
<span class="sig-prename descclassname"><span class="pre">depthy.lightfield.</span></span><span class="sig-name descname"><span class="pre">epi_depth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lf_img_arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lf_wid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primal_opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perc_clip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a></span></span><a class="headerlink" href="#depthy.lightfield.epi_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>High-level function for depth map computation based on epipolar images from a light-field.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lf_img_arr</strong> – light-field image array with odd number of light-field dimensions</p></li>
<li><p><strong>lf_wid</strong> – width of light-field rows and columns has to be an odd positive integer</p></li>
<li><p><strong>primal_opt</strong> – flag for usage of primal dual algorithm</p></li>
<li><p><strong>perc_clip</strong> – percentile for slope ratio extrema that will be clipped</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>disparity map</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="depthy.lightfield.extract_epi">
<span class="sig-prename descclassname"><span class="pre">depthy.lightfield.</span></span><span class="sig-name descname"><span class="pre">extract_epi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lf_img_arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spatial_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angular_idx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a></span></span><a class="headerlink" href="#depthy.lightfield.extract_epi" title="Permalink to this definition">¶</a></dt>
<dd><p>Compose epipolar image from light-field array given the reference coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lf_img_arr</strong> – light-field image array</p></li>
<li><p><strong>spatial_idx</strong> – index for spatial image line (column or row)</p></li>
<li><p><strong>angular_idx</strong> – index for light-field dimension (column or row)</p></li>
<li><p><strong>axis</strong> – along vertical (False) or horizontal (True) direction</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>epipolar image as a copy of numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="depthy.lightfield.coherence_weighting">
<span class="sig-prename descclassname"><span class="pre">depthy.lightfield.</span></span><span class="sig-name descname"><span class="pre">coherence_weighting</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#depthy.lightfield.coherence_weighting" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge disparity maps using weights from the coherence as a reliability measure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>disp_arr</strong> – stacked array of disparity maps</p></li>
<li><p><strong>reli_arr</strong> – stacked array of coherence maps</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>weighted disparity, mean confidence</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="depthy-lightfield-structure-tensor">
<h2><span class="section-number">2.3. </span>depthy.lightfield.structure_tensor<a class="headerlink" href="#depthy-lightfield-structure-tensor" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="depthy.lightfield.structure_tensor.local_structure_tensor">
<span class="sig-prename descclassname"><span class="pre">depthy.lightfield.structure_tensor.</span></span><span class="sig-name descname"><span class="pre">local_structure_tensor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#depthy.lightfield.structure_tensor.local_structure_tensor" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the local slopes of a given input image (e.g. epipolar image) using a structure tensor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> – image input (e.g. epipolar image)</p></li>
<li><p><strong>si</strong> – sigma for inner Gaussian kernel</p></li>
<li><p><strong>so</strong> – sigma for outer Gaussian kernel</p></li>
<li><p><strong>slope_method</strong> – ‘eigen’ for eigendecomposition</p></li>
<li><p><strong>grad_method</strong> – partial derivative method with ‘scharr’ as default and ‘sobel’ or ‘gradient’ as alternatives</p></li>
<li><p><strong>f</strong> – focal length scaling local slope values</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>local_slopes, coherence, n</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="depthy.lightfield.structure_tensor.partial_img_gradients">
<span class="sig-prename descclassname"><span class="pre">depthy.lightfield.structure_tensor.</span></span><span class="sig-name descname"><span class="pre">partial_img_gradients</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#depthy.lightfield.structure_tensor.partial_img_gradients" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute partial derivatives of a 2-dimensional image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> – input image</p></li>
<li><p><strong>method</strong> – method for first-order partial derivative featuring ‘scharr’, ‘sobel’ and ‘gradient’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>vertical partial gradient, horizontal partial gradient</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="depthy-misc-io-functions">
<h2><span class="section-number">2.4. </span>depthy.misc.io_functions<a class="headerlink" href="#depthy-misc-io-functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="depthy.misc.load_img_file">
<span class="sig-prename descclassname"><span class="pre">depthy.misc.</span></span><span class="sig-name descname"><span class="pre">load_img_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_opt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a></span></span><a class="headerlink" href="#depthy.misc.load_img_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Load image file to numpy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_path</strong> – absolute path of file name</p></li>
<li><p><strong>norm_opt</strong> – option to normalize intensity</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>image as numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="depthy.misc.load_lf_arr">
<span class="sig-prename descclassname"><span class="pre">depthy.misc.</span></span><span class="sig-name descname"><span class="pre">load_lf_arr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fnames</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a></span></span><a class="headerlink" href="#depthy.misc.load_lf_arr" title="Permalink to this definition">¶</a></dt>
<dd><p>Load light-field images from a list of file names (absolute path) in ascending order and reshape the array to
equally sized views. Reshaping of light-field dimensions is based on <span class="math notranslate nohighlight">\(\sqrt{N}\)</span> where <span class="math notranslate nohighlight">\(N\)</span> is the total
number of provided file names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fnames</strong> – list of file names (full absolute path)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array of light-field images</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="depthy-misc-pfm-handler">
<h2><span class="section-number">2.5. </span>depthy.misc.pfm_handler<a class="headerlink" href="#depthy-misc-pfm-handler" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="depthy.misc.pfm_handler.save_pfm">
<span class="sig-prename descclassname"><span class="pre">depthy.misc.pfm_handler.</span></span><span class="sig-name descname"><span class="pre">save_pfm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img_arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#depthy.misc.pfm_handler.save_pfm" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a Numpy array to a PFM file.
:param img_arr: image array
:param file_path: file path string
:param scale: scale value
:param norm: normalization option
:return: boolean</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="depthy.misc.pfm_handler.load_pfm">
<span class="sig-prename descclassname"><span class="pre">depthy.misc.pfm_handler.</span></span><span class="sig-name descname"><span class="pre">load_pfm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#depthy.misc.pfm_handler.load_pfm" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a PFM file into a Numpy array. Note that it will have
a shape of H x W, not W x H. Returns a tuple containing the
loaded image and the scale factor from the file.
:param file_path: file path to pgm file
:return: grayscale image array, scale value</p>
</dd></dl>

</div>
<div class="section" id="depthy-misc-ply-handler">
<h2><span class="section-number">2.6. </span>depthy.misc.ply_handler<a class="headerlink" href="#depthy-misc-ply-handler" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="depthy.misc.ply_handler.save_ply">
<span class="sig-prename descclassname"><span class="pre">depthy.misc.ply_handler.</span></span><span class="sig-name descname"><span class="pre">save_ply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'./depth.ply'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#depthy.misc.ply_handler.save_ply" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an ASCII text file containing a point cloud which is in line with the Polygon File Format (PLY).
See <a class="reference external" href="https://en.wikipedia.org/wiki/PLY_(file_format">https://en.wikipedia.org/wiki/PLY_(file_format</a>) for further information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pts</strong> – numpy array [Zx6] carrying x,y,z as well as R,G,B information</p></li>
<li><p><strong>file_path</strong> – file path string for file creation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True once saving succeeded</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="depthy.misc.ply_handler.disp2pts">
<span class="sig-prename descclassname"><span class="pre">depthy.misc.ply_handler.</span></span><span class="sig-name descname"><span class="pre">disp2pts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">disp_img</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_img</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focal_length_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_dist_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baseline_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensor_mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.22)"><span class="pre">numpy.ndarray</span></a></span></span><a class="headerlink" href="#depthy.misc.ply_handler.disp2pts" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert disparity image to an array of points representing the point cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>disp_img</strong> – disparity image [MxN]</p></li>
<li><p><strong>rgb_img</strong> – RGB image [MxNx3] which corresponds to disparity image, but is left optional</p></li>
<li><p><strong>focal_length_mm</strong> – focal length in mm</p></li>
<li><p><strong>focus_dist_mm</strong> – distance at which image is focused in mm</p></li>
<li><p><strong>baseline_mm</strong> – spacing between optical centers of cameras in mm</p></li>
<li><p><strong>sensor_mm</strong> – sensor size in mm</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array of points [Zx6] where Z=M*N</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. API documentation</a><ul>
<li><a class="reference internal" href="#depthy-stereo">2.1. depthy.stereo</a></li>
<li><a class="reference internal" href="#depthy-lightfield">2.2. depthy.lightfield</a></li>
<li><a class="reference internal" href="#depthy-lightfield-structure-tensor">2.3. depthy.lightfield.structure_tensor</a></li>
<li><a class="reference internal" href="#depthy-misc-io-functions">2.4. depthy.misc.io_functions</a></li>
<li><a class="reference internal" href="#depthy-misc-pfm-handler">2.5. depthy.misc.pfm_handler</a></li>
<li><a class="reference internal" href="#depthy-misc-ply-handler">2.6. depthy.misc.ply_handler</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="readme.html"
                        title="previous chapter"><span class="section-number">1. </span>depthy</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/apidoc.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="readme.html" title="1. depthy"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">depthy 0.4.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2. </span>API documentation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Christopher Hahne.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>